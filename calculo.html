<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/styles.css" rel="stylesheet"/>
    <title>Comidas</title>
</head>
<body>
  <header class="masthead">
    <form action="#" method="get" id="formulariopersonal"></form>
    <div class="contenedorpaquetes" >
        
          <div class="cajapaquete">
              <img src="rabas.jpg"class=tamimg alt="Entrada">
              <br>
              <label for="P1">
                 Entrada
              </label>
              <input type="checkbox" id="P1" >
              <div id="MostrarP1"> 
                <label for="cantP1"> Personas</label>
                <select id="cantP1">
                    <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                </select> <br>
               </div> 
         </div>
          <div class="cajapaquete">
            <img src="carne.jpg"class=tamimg alt="carne">
             <br>
              <label for="P2">
                Principal
              </label>
              <input type="checkbox" id="P2" > <br>
              <div id="MostrarP2">
                  <label for="cantP2"> Personas</label>
                  <select id="cantP2">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                  </select>
                  
              </div>
        </div>  
        <div class="cajapaquete">  
            <img src="postre.jpeg"class=tamimg alt="postre">
           <br>
          
            <label for="P2">
              Postres
            </label>
            <input type="checkbox" id="P3" > <br>
            <div id="MostrarP3">
                <label for="cantP3"> Personas</label>
                <select id="cantP3">
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                </select>
                
            </div>
      </div>     
  </div>
 
    <div id="preciototal" class="btn btn-primary btn-xl text-uppercase">Precio
      
    </div>
 </form>
         <script>
             //Cuando ocurre el evento página Web cargada el navegador llama a la función DocumentoCargado()
             window.onload=DocumentoCargado; 

             //En esta función se capturan todos los eventos requeridos por el script
             function DocumentoCargado(){
                let checkboxP1 = document.getElementById("P1"); //obtiene los elementos del documento html y los asigna a variables
                let checkboxP2 = document.getElementById("P2"); 
                let checkboxP3 = document.getElementById("P3"); 
                let cantpersonasP1 = document.getElementById("cantP1");
                let cantpersonasP2 = document.getElementById("cantP2");
                let cantpersonasP3 = document.getElementById("cantP3");
                cantpersonasP1.onchange = selectp1personas; // Se ejecuta la función selectp1personas() cuando ocurre el evento
                cantpersonasP2.onchange = selectp2personas;
                cantpersonasP3.onchange = selectp3personas;
                checkboxP1.onclick = checkboxP1Apretado; 
                checkboxP2.onclick = checkboxP2Apretado;
                checkboxP3.onclick = checkboxP3Apretado;

                MostrarPrecioTotal(); // llama a la función 
             }
             //Cuando el usuario aprieta el checkbox, se debe mostrar u ocultar el objeto select
             
             function checkboxP1Apretado()
             {
                if(document.getElementById("P1").checked == true)
                {
                    document.getElementById("MostrarP1").style.display = "block";
                }
                else
                {
                    document.getElementById("MostrarP1").style.display = "none";
                }
                MostrarPrecioTotal();
             }
             function checkboxP2Apretado()
             {
                if(document.getElementById("P2").checked == true)
                {
                    document.getElementById("MostrarP2").style.display = "block";
                }
                else
                {
                    document.getElementById("MostrarP2").style.display = "none";
                }
                MostrarPrecioTotal();
             }
             function checkboxP3Apretado()
             {
                if(document.getElementById("P3").checked == true)
                {
                    document.getElementById("MostrarP3").style.display = "block";
                }
                else
                {
                    document.getElementById("MostrarP3").style.display = "none";
                }
                MostrarPrecioTotal();
             }
             // En base a los checkbox y los objetos select, esta función calcula el precio total
             function MostrarPrecioTotal()
             {
               let Precio = 0;

               if (document.getElementById("P1").checked == true)
               {
                   Precio += 1000 * document.getElementById("cantP1").value;
               }

               if (document.getElementById("P2").checked == true)
               {
                   Precio += 3200 * document.getElementById("cantP2").value;
               }
               if (document.getElementById("P3").checked == true)
               {
                   Precio += 1800 * document.getElementById("cantP3").value;
               }
               document.getElementById("preciototal").innerHTML= "precio: $" + Precio;
             }
             //Se ejecuta cuando cambia el valor del select
             function selectp1personas()
             {
               MostrarPrecioTotal();
             }
             function selectp2personas()
             {
               MostrarPrecioTotal();
             }
             function selectp3personas()
             {
               MostrarPrecioTotal();
             }


         </script>
    </div>
  </header>   
</body>

</html>